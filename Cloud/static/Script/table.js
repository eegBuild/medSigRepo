var patientList = [{"id":1,"first_name":"Kathleen","last_name":"Robertson","email":"krobertson0@printfriendly.com","country":"Finland","job_title":"Actuary","phone":"0-(275)418-8742"},
{"id":2,"first_name":"Ronald","last_name":"Austin","email":"raustin1@cnet.com","country":"China","job_title":"Analyst Programmer","phone":"3-(648)343-0211"},
{"id":3,"first_name":"Larry","last_name":"Wells","email":"lwells2@canalblog.com","country":"China","job_title":"Research Assistant IV","phone":"1-(162)237-5844"},
{"id":4,"first_name":"Tammy","last_name":"Alexander","email":"talexander3@myspace.com","country":"China","job_title":"Product Engineer","phone":"0-(887)216-5132"},
{"id":5,"first_name":"Fred","last_name":"Andrews","email":"fandrews4@angelfire.com","country":"Afghanistan","job_title":"Staff Accountant I","phone":"1-(823)036-9100"},
{"id":6,"first_name":"Jeremy","last_name":"Morrison","email":"jmorrison5@si.edu","country":"Chile","job_title":"Legal Assistant","phone":"0-(521)846-0281"},
{"id":7,"first_name":"Roy","last_name":"Vasquez","email":"rvasquez6@amazon.de","country":"South Korea","job_title":"Environmental Specialist","phone":"8-(812)258-0853"},
{"id":8,"first_name":"Kathleen","last_name":"Simmons","email":"ksimmons7@istockphoto.com","country":"United States","job_title":"Recruiting Manager","phone":"9-(151)462-7963"},
{"id":9,"first_name":"Kenneth","last_name":"Reynolds","email":"kreynolds8@xinhuanet.com","country":"France","job_title":"Programmer Analyst I","phone":"0-(715)788-4732"},
{"id":10,"first_name":"Beverly","last_name":"Watkins","email":"bwatkins9@comsenz.com","country":"Indonesia","job_title":"Editor","phone":"1-(653)613-9167"},
{"id":11,"first_name":"Jean","last_name":"Mason","email":"jmasona@feedburner.com","country":"Madagascar","job_title":"Marketing Manager","phone":"9-(265)480-1201"},
{"id":12,"first_name":"Patricia","last_name":"Martinez","email":"pmartinezb@soundcloud.com","country":"Brazil","job_title":"Internal Auditor","phone":"9-(336)788-0302"},
{"id":13,"first_name":"Diane","last_name":"Burns","email":"dburnsc@adobe.com","country":"Mexico","job_title":"Business Systems Development Analyst","phone":"2-(483)787-9145"},
{"id":14,"first_name":"Adam","last_name":"Owens","email":"aowensd@shutterfly.com","country":"Pakistan","job_title":"Cost Accountant","phone":"5-(579)490-1462"},
{"id":15,"first_name":"Judith","last_name":"Fox","email":"jfoxe@accuweather.com","country":"Indonesia","job_title":"Financial Analyst","phone":"8-(367)115-5609"},
{"id":16,"first_name":"Ryan","last_name":"Patterson","email":"rpattersonf@pen.io","country":"Ukraine","job_title":"Assistant Manager","phone":"3-(651)998-2011"},
{"id":17,"first_name":"Jane","last_name":"Armstrong","email":"jarmstrongg@latimes.com","country":"Armenia","job_title":"Product Engineer","phone":"8-(810)649-6198"},
{"id":18,"first_name":"Karen","last_name":"Little","email":"klittleh@blogspot.com","country":"Portugal","job_title":"Quality Engineer","phone":"8-(694)882-8440"},
{"id":19,"first_name":"Jennifer","last_name":"Torres","email":"jtorresi@ihg.com","country":"Tajikistan","job_title":"Civil Engineer","phone":"2-(713)238-0072"},
{"id":20,"first_name":"Kenneth","last_name":"Duncan","email":"kduncanj@ow.ly","country":"Indonesia","job_title":"Developer IV","phone":"3-(892)981-5131"},
{"id":21,"first_name":"Steve","last_name":"Wallace","email":"swallacek@mapquest.com","country":"France","job_title":"Paralegal","phone":"2-(548)166-7837"},
{"id":22,"first_name":"Jeffrey","last_name":"Hunt","email":"jhuntl@slate.com","country":"Portugal","job_title":"Systems Administrator I","phone":"0-(098)586-7521"},
{"id":23,"first_name":"Kimberly","last_name":"Knight","email":"kknightm@rediff.com","country":"Vietnam","job_title":"Cost Accountant","phone":"7-(528)101-3204"},
{"id":24,"first_name":"Charles","last_name":"Murphy","email":"cmurphyn@delicious.com","country":"Burkina Faso","job_title":"Quality Engineer","phone":"2-(599)182-1907"},
{"id":25,"first_name":"Juan","last_name":"Morris","email":"jmorriso@rambler.ru","country":"Russia","job_title":"Social Worker","phone":"5-(363)619-1609"},
{"id":26,"first_name":"Pamela","last_name":"Parker","email":"pparkerp@shinystat.com","country":"Indonesia","job_title":"Teacher","phone":"4-(392)632-5528"},
{"id":27,"first_name":"Margaret","last_name":"Rodriguez","email":"mrodriguezq@whitehouse.gov","country":"United Kingdom","job_title":"Information Systems Manager","phone":"7-(919)974-4490"},
{"id":28,"first_name":"Diane","last_name":"Fowler","email":"dfowlerr@mozilla.com","country":"Peru","job_title":"Accountant I","phone":"1-(359)088-9177"},
{"id":29,"first_name":"Andrew","last_name":"Porter","email":"aporters@123-reg.co.uk","country":"Portugal","job_title":"Technical Writer","phone":"8-(264)768-2203"},
{"id":30,"first_name":"Justin","last_name":"Long","email":"jlongt@etsy.com","country":"Indonesia","job_title":"Business Systems Development Analyst","phone":"0-(560)702-9460"},
{"id":31,"first_name":"Julie","last_name":"Burke","email":"jburkeu@parallels.com","country":"China","job_title":"Payment Adjustment Coordinator","phone":"5-(444)152-4384"},
{"id":32,"first_name":"Doris","last_name":"Hunter","email":"dhunterv@bravesites.com","country":"Russia","job_title":"Safety Technician II","phone":"7-(843)825-5405"},
{"id":33,"first_name":"Shawn","last_name":"Matthews","email":"smatthewsw@webmd.com","country":"Peru","job_title":"Senior Cost Accountant","phone":"8-(540)049-3268"},
{"id":34,"first_name":"Janice","last_name":"Alvarez","email":"jalvarezx@unesco.org","country":"Russia","job_title":"Senior Sales Associate","phone":"2-(186)656-2752"},
{"id":35,"first_name":"Susan","last_name":"Stewart","email":"sstewarty@vk.com","country":"Mexico","job_title":"Environmental Tech","phone":"8-(610)640-1810"},
{"id":36,"first_name":"Sean","last_name":"Palmer","email":"spalmerz@topsy.com","country":"Azerbaijan","job_title":"Account Representative IV","phone":"9-(991)340-0096"},
{"id":37,"first_name":"Shawn","last_name":"Stewart","email":"sstewart10@illinois.edu","country":"Russia","job_title":"Assistant Professor","phone":"9-(765)989-3396"},
{"id":38,"first_name":"Christina","last_name":"Riley","email":"criley11@dell.com","country":"China","job_title":"Speech Pathologist","phone":"6-(150)765-5140"},
{"id":39,"first_name":"Sara","last_name":"Rivera","email":"srivera12@godaddy.com","country":"Hungary","job_title":"Biostatistician III","phone":"6-(598)650-7148"},
{"id":40,"first_name":"Kathleen","last_name":"Cunningham","email":"kcunningham13@wunderground.com","country":"China","job_title":"Cost Accountant","phone":"6-(709)685-4442"},
{"id":41,"first_name":"Alan","last_name":"Williams","email":"awilliams14@lulu.com","country":"United States","job_title":"Senior Cost Accountant","phone":"5-(108)047-6344"},
{"id":42,"first_name":"Gloria","last_name":"Mcdonald","email":"gmcdonald15@meetup.com","country":"Bulgaria","job_title":"Actuary","phone":"6-(761)416-7713"},
{"id":43,"first_name":"Harold","last_name":"Stanley","email":"hstanley16@google.com","country":"Mauritania","job_title":"Environmental Specialist","phone":"4-(811)337-5096"},
{"id":44,"first_name":"Margaret","last_name":"Ramos","email":"mramos17@mashable.com","country":"Philippines","job_title":"Programmer I","phone":"3-(781)969-4309"},
{"id":45,"first_name":"Debra","last_name":"Elliott","email":"delliott18@ox.ac.uk","country":"China","job_title":"Graphic Designer","phone":"1-(961)307-3517"},
{"id":46,"first_name":"Ann","last_name":"Bailey","email":"abailey19@icio.us","country":"Mongolia","job_title":"Dental Hygienist","phone":"4-(519)154-4173"},
{"id":47,"first_name":"Alice","last_name":"Washington","email":"awashington1a@deliciousdays.com","country":"Yemen","job_title":"Budget/Accounting Analyst III","phone":"4-(243)994-8127"},
{"id":48,"first_name":"Donna","last_name":"Reynolds","email":"dreynolds1b@microsoft.com","country":"Indonesia","job_title":"Actuary","phone":"3-(512)801-9040"},
{"id":49,"first_name":"John","last_name":"Daniels","email":"jdaniels1c@jimdo.com","country":"Poland","job_title":"Geologist II","phone":"5-(502)052-3630"},
{"id":50,"first_name":"Andrew","last_name":"Moreno","email":"amoreno1d@usda.gov","country":"Italy","job_title":"Senior Quality Engineer","phone":"6-(164)401-4364"}];

var unitList =[{"unit_id":1,"unit_type":"ECG","unit_number":"97-AC-D1-8E-D2-A8","status":"green","assign_patient":"M","ip_address":"242.223.250.112"},
{"unit_id":2,"unit_type":"EEG","unit_number":"E6-44-B9-E8-46-ED","status":"red","assign_patient":"x","ip_address":"155.53.24.132"},
{"unit_id":3,"unit_type":"ECG","unit_number":"B6-2C-07-16-1A-43","status":"green","assign_patient":"x","ip_address":"184.49.240.183"},
{"unit_id":4,"unit_type":"ECG","unit_number":"3C-8C-46-49-2A-37","status":"red","assign_patient":"x","ip_address":"165.134.76.137"},
{"unit_id":5,"unit_type":"ECG","unit_number":"82-AB-F1-8D-B4-20","status":"amber","assign_patient":"x","ip_address":"182.137.219.20"},
{"unit_id":6,"unit_type":"EEG","unit_number":"42-16-E9-E1-AC-5B","status":"red","assign_patient":"x","ip_address":"234.154.243.21"},
{"unit_id":7,"unit_type":"ECG","unit_number":"7D-44-C6-4B-BE-EC","status":"green","assign_patient":"x","ip_address":"19.238.18.182"},
{"unit_id":8,"unit_type":"ECG","unit_number":"39-7C-05-B8-A7-9F","status":"red","assign_patient":"x","ip_address":"59.26.150.106"},
{"unit_id":9,"unit_type":"ECG","unit_number":"82-E2-F0-1C-F5-FA","status":"red","assign_patient":"x","ip_address":"131.120.205.55"},
{"unit_id":10,"unit_type":"EEG","unit_number":"88-61-96-71-CB-87","status":"red","assign_patient":"x","ip_address":"60.221.56.235"},
{"unit_id":11,"unit_type":"EEG","unit_number":"FF-61-96-3D-CB-8C","status":"red","assign_patient":"x","ip_address":"60.221.56.235"}];

var fadeTime = 1000;




function setPatientsTable(divIn)
{


	$(divIn).empty();
	var out = ("\
		<div id='tableBody' class ='datagrid' value = '"+$(divIn).val()+"'>\
		<table id = 'tablePatientsx'>\
		<thead>\
		<tr class = 'seperator'>\
			 <th class = 'seperator' colspan = '7' style=' background-color:#1E90FF; border-color:#1E90FF; color:#ffffff;'>Patients</th>\
			 </tr>\
		</thead>\
			<thead>\
			  <tr>\
			  <th>Patient Id</th>\
			  <th>First Name</th>\
			  <th>Last Name</th>\
			  <th>Email</th>\
			  <th>Country</th>\
			  <th>Job Title</th>\
			  <th>Phone</th>\
			  </tr>\
			</thead>\
			</table>\
			<div style='overflow-y:scroll; overflow-x:hidden; max-height:400px; width:auto;'>\
			<table id = 'tablePatients'>\
			<tbody>");
			
			out +=("\
			  <tr>\
			  <td></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td  class = 'wrap' style = 'width:auto;' ></td>\
			  </tr>\
			 ");
			 
	for (var i in patientList) 
	{
		out +=("\
			  <tr>\
			  <td  class = 'titleBlue' >" + patientList[i].id+ "</td>\
			  <td class = 'titleBlue'>" + patientList[i].first_name+"</td>\
			  <td class = 'titleBlue' >" + patientList[i].last_name+"</td>\
			  <td class = 'wrap'>" + patientList[i].email+ "</td>\
			  <td class = 'wrap' >" + patientList[i].country+ "</td>\
			  <td class = 'wrap' >" + patientList[i].job_title+ "</td>\
			  <td  class = 'wrap' style = 'width:auto;' >" + patientList[i].phone+ "</td>\
			  </tr>\
			 ");
	}
	
	out += ("</tbody>\
			</table>\
			</div>\
			</div>\
			");
		$(divIn).hide();
		$(divIn).append(out);
		$(divIn).fadeIn(fadeTime);
		
		setTableHover();
		  
		  tableFormWork('#tablePatients',4);
	
}



function setUnitTable(divIn)
{
	var count = Object.keys(unitList[0]).length


	$(divIn).empty();
	var out = ("\
		<div id='tableBody' class ='datagrid' value = '"+$(divIn).val()+"'>\
		<table id = 'anytablex'>\
		<thead>\
		<tr class = 'seperator'>\
			 <th class = 'seperator' colspan = '"+count+"' style=' background-color:#1E90FF; border-color:#1E90FF; color:#ffffff;'>Patients</th>\
			 </tr>\
		</thead>\
			<thead>\
			  <tr>");
			  for(var i = 0; i < count; i++)
			  {
					var arr =  Object.keys(unitList[0]);
					var x = splitKey(arr[i]);
					out +=("<th>"+x+"</th>");

			  }
			  out +=("\
			  </tr>\
			</thead>\
			</table>\
			<div style='overflow-y:scroll; overflow-x:hidden; max-height:400px; width:auto;'>\
			<table id = 'anytable'>\
			<tbody>");
			
			out +=("\
			  <tr>\
			  <td ></td>\
			  <td ></td>\
			  <td class = 'wrap'></td>\
			  <td '></td>\
			  <td></td>\
			  <td  style = 'width:auto;' ></td>\
			  </tr>\
			 ");

				    for(var i=0; i < unitList.length; i++)
					{
						var obj = unitList[i];
						out +=("<tr>");
							for(var key in obj)
							{
								var attrName = key;
								var attrValue = obj[key];
								out += ("<td class = 'wrap'>" +attrValue+ "</td>");		
							}
							out += ("<td class = 'wrap'> </td>");
						out +=("</tr>");	
					}
					
			out += ("</tbody>\
			</table>\
			</div>\
			</div>\
			<div id ='gif'><img id = 'anigif' src = ../static/Images/ani.png /></div>\
			");
		$(divIn).hide();
		$(divIn).append(out);
		$(divIn).fadeIn(fadeTime);
		
		setTableHover();
		unitTableFormWork('#anytable',4, unitList);
	
}

function setAnyTable(divIn)
{

	var count = Object.keys(patientList[0]).length


	$(divIn).empty();
	var out = ("\
		<div id='tableBody' class ='datagrid' value = '"+$(divIn).val()+"'>\
		<table id = 'anytablex'>\
		<thead>\
		<tr class = 'seperator'>\
			 <th class = 'seperator' colspan = '"+count+"' style=' background-color:#1E90FF; border-color:#1E90FF; color:#ffffff;'>Patients</th>\
			 </tr>\
		</thead>\
			<thead>\
			  <tr>");
			  for(var i = 0; i < count; i++)
			  {
					var arr =  Object.keys(patientList[0]);
					var x = splitKey(arr[i]);
					out +=("<th>"+x+"</th>");

			  }
			  out +=("\
			  </tr>\
			</thead>\
			</table>\
			<div style='overflow-y:scroll; overflow-x:hidden; max-height:400px; width:auto;'>\
			<table id = 'anytable'>\
			<tbody>");
			
			out +=("\
			  <tr>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td class = 'wrap'></td>\
			  <td  class = 'wrap' style = 'width:auto;' ></td>\
			  </tr>\
			 ");

				    for(var i=0; i < patientList.length; i++)
					{
						var obj = patientList[i];
						out +=("<tr>");
							for(var key in obj)
							{
								var attrName = key;
								var attrValue = obj[key];
								out += ("<td class = 'wrap'>" +attrValue+ "</td>");		
							}
						out +=("</tr>");	
					}
					
			out += ("</tbody>\
			</table>\
			</div>\
			</div>\
			");
		$(divIn).hide();
		$(divIn).append(out);
		$(divIn).fadeIn(fadeTime);
		
		setTableHover();
		tableFormWork('#anytable',4);	
}

function splitKey(s)
{
	var arr = s.split("_");
	var out = "";
	for(var i = 0; i < arr.length; i++)
	{
		var x = arr[i].charAt(0).toUpperCase() + arr[i].slice(1);
		out += x + " ";
	}
	return out;
}

function unitTableFormWork(table, pos, file)
{
    var $tables = $(table);
	var $tablex = "#"+$(table).attr('id')+"x";
	var head = $($tablex);//head is needed for .find() function
	var firstCol = 1;
	var dropDown = "";
	
	//create patient drop down from list
	dropDown += ("<select><option value = 'null'> Assign Patient </option>");
		for (var i in patientList) 
	{
		dropDown +=("<option value="+ patientList[i].last_name+" "+ patientList[i].first_name+">"+ patientList[i].last_name+" "+ patientList[i].first_name+"</option>");
	}
	dropDown += ("</select>");

		$('#anytable tr').each(function() {
			var out = $(this).find("td").eq(3).html();
			if (out =='green')
			{
				$(this).find("td").eq(3).text("");
				$(this).find("td").eq(3).append($('<td class="unitstatus"><img class = "traffic"   src="../static/Images/online2.png" data = "green"/></td>'));
				$(this).find("td").eq(5).text("");
				$(this).find("td").eq(5).append($(dropDown));
				//$(this).find("td").eq(6).text("");
				$(this).find("td").eq(7).append($('<td class="unitcontrol"><img class = "btnP" src="../static/Images/play.png" data = "false"/><img class = "btnS"  src="../static/Images/stop.png" data = "false" /><img class = "btnR"  src="../static/Images/rec.png" data = "false" /></td>'));
			}
			if (out =='amber')
			{
				$(this).find("td").eq(3).text("");
				$(this).find("td").eq(3).append($('<td class="unitstatus"><img class = "traffic"   src="../static/Images/online-record2.png" data = "amber"/></td>'));
			}
			if (out =='red')
			{
				$(this).find("td").eq(3).text("");
				$(this).find("td").eq(3).append($('<td class="unitstatus"><img class = "traffic"   src="../static/Images/offline2.png" data = "red"/></td>'));
			}
		});
		  
  $(table).each(function () 
  {
	var table = $(this);
	
  
	head.find('thead tr').not('.seperator').append($('<th class="edit"><span class="validate">Options</span></th>'));
	table.find('thead tr').not('.seperator').append($('<th class="edit">3 </th>'));
	table.find('thead tr').not('.seperator').append($('<th class="edit">4 </th>'));
	table.find('thead tr').not('.seperator').append($('<th class="edit">4 </th>'));
    table.find('tbody tr:first').not('.seperator').append($('<td class="edit"><img class = "btnE" src="../static/Images/addGreen.png" data = "true"/><img class = "btnV"  src="../static/Images/empty.png" /></td>'));
	//table.find('tbody tr').not('tbody tr:first').not('.seperator').append($('<td class="edit"><img class = "btnE"   src="../static/Images/editGreen60.png" data = "true"/><img class = "btnD"  src="../static/Images/deleteRed.png" /></td>'));
	table.find('tr.seperator').append($('<th class="seperator" style=" background-color:#006699; border-color:#006699;"></th>'));

	head.find('tr.seperator').append($('<th class="seperator" style=" background-color:#1E90FF; border-color:#1E90FF;"></th>'));
  });
  
  // make table long in width
  var divTableWidth = $('.divTable').width();
  var datagridWidth = $('#tableBody').width();
  var excess = divTableWidth - datagridWidth;

  $(table).find('tbody tr td:nth-child('+pos+')').css('width', excess+'px');
   
  head.find( 'th').not('th.seperator').each(function () 
  {
	var w = $(table).find("tbody tr td:nth-child("+firstCol+")").width();
	$(this).css('width', w);
	firstCol ++;
		
  });
  
  	$(table).find('.btnP').live('click', function(e) 
	{
		out = ("<img id = 'anigif' src = ../static/Images/anigif.gif />");
		$('#gif').hide();
		$('#gif').empty();
		$('#gif').prepend(out);
		$('#gif').fadeIn(fadeTime);
		e.preventDefault();
	});



  $(table).find('.btnE').live('click', function(e) 
  {
		tableEditable(this);
		e.preventDefault();
  });
  
  $(table).find('.btnEtoSave').live('click', function(e) 
	{
		tableEditable(this);
		e.preventDefault();
	});
  
  $(table).find('.btnEsaved').live('click', function(e) 
	{
		tableEditable(this);
		e.preventDefault();
	});
  
  $(table).find('.btnV').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
	$(table).find('.btnVx').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
    $(table).find('.btnD').live('click', function(e) 
	{

		var r = confirm("Do you want to delete this Record?");
		if (r == true) 
			{
				tableDelete(this);
			} 
			else 
			{
				
			}
		e.preventDefault();
  });
	$(table).find('.btnDx').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
  
  $('.verifyCheck').change(function(e) 
  {
  
    if(this.checked)
	{
		tableVerifyAll(table);
	}
	else
	{
		tableVerifyNone(table);
	}
    e.preventDefault();
  });
  
  $(table).css('overflow-y', 'scroll');
  }


function tableFormWork(table, pos)
{
    var $tables = $(table);
	var $tablex = "#"+$(table).attr('id')+"x";
	var head = $($tablex);//head is needed for .find() function
	var firstCol = 1;
	
  
  $(table).each(function () 
  {
	var table = $(this);
  
	head.find('thead tr').not('.seperator').append($('<th class="edit"><span class="validate">Options</span></th>'));
	table.find('thead tr').not('.seperator').append($('<th class="edit">3 </th>'));
	table.find('thead tr').not('.seperator').append($('<th class="edit">4 </th>'));
    table.find('tbody tr:first').not('.seperator').append($('<td class="edit"><img class = "btnE" src="../static/Images/addGreen.png" data = "true"/><img class = "btnV"  src="../static/Images/empty.png" /></td>'));
	table.find('tbody tr').not('tbody tr:first').not('.seperator').append($('<td class="edit"><img class = "btnE"   src="../static/Images/editGreen60.png" data = "true"/><img class = "btnD"  src="../static/Images/deleteRed.png" /></td>'));
	table.find('tr.seperator').append($('<th class="seperator" style=" background-color:#006699; border-color:#006699;"></th>'));

	head.find('tr.seperator').append($('<th class="seperator" style=" background-color:#1E90FF; border-color:#1E90FF;"></th>'));
  });
  
  // make table long in width
  var divTableWidth = $('.divTable').width();
  var datagridWidth = $('#tableBody').width();
  var excess = divTableWidth - datagridWidth;

  $(table).find('tbody tr td:nth-child('+pos+')').css('width', excess+'px');
   
  head.find( 'th').not('th.seperator').each(function () 
  {
	var w = $(table).find("tbody tr td:nth-child("+firstCol+")").width();
	$(this).css('width', w);
	firstCol ++;
		
  });

  $(table).find('.btnE').live('click', function(e) 
  {
		tableEditable(this);
		e.preventDefault();
  });
  
  $(table).find('.btnEtoSave').live('click', function(e) 
	{
		tableEditable(this);
		e.preventDefault();
	});
  
  $(table).find('.btnEsaved').live('click', function(e) 
	{
		tableEditable(this);
		e.preventDefault();
	});
  
  $(table).find('.btnV').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
	$(table).find('.btnVx').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
    $(table).find('.btnD').live('click', function(e) 
	{

		var r = confirm("Do you want to delete this Record?");
		if (r == true) 
			{
				tableDelete(this);
			} 
			else 
			{
				
			}
		e.preventDefault();
  });
	$(table).find('.btnDx').live('click', function(e) 
	{
		tableVerify(this);
		e.preventDefault();
  });
  
  $('.verifyCheck').change(function(e) 
  {
  
    if(this.checked)
	{
		tableVerifyAll(table);
	}
	else
	{
		tableVerifyNone(table);
	}
    e.preventDefault();
  });
  
  $(table).css('overflow-y', 'scroll');
  }


function tableEditable(button) 
{
    var $button = $(button);
    var $row = $button.parents('tbody tr');
    var $cells = $row.children('td.wrap').not('.edit');
	var $nonEditCell = $row.children('td').not('td.wrap, .edit');
	
  
	  if($row.data('flag'))
	  { 
		$cells.each(function () {
		var cell = $(this);
		cell.html(cell.find('input').val());
	  })
		
		$row.data('flag',false);
		$button.val('Edit');
		$button.attr('class', 'btnEsaved');
		
	  } 
	  else
	  { // in table mode, move to edit mode 
		// cell methods
		$cells.each(function()
		{
		  var cell = $(this);
		  cell.data('text', cell.html()).html('');
		  
		  var $input = $('<input type="text" />')
			.val(cell.data('text'))
			.css({'direction':'ltr','font-size': '11px','font-weight': 'normal'})
			.width(cell.width() - 16);
			cell.append($input);
		 })
		
		$row.data('flag', true);
		$button.val('Save');
		$button.attr('class', 'btnEtoSave');
	  }
  }
  
  function tableDelete(button) 
  {
	var $button = $(button);
    var $row = $button.parents('tbody tr');
	$row .addClass('allRed');

        $row .fadeOut(1500, function(){
            $row.remove();
			});

  }
  
function tableVerify(button) 
{
  var count = 1;
    var $button = $(button);
    var $row = $button.parents('tbody tr');
	var $nonEditCell = $row.children('td').not('.wrap, .edit, .select');
		
	if($button.attr('data') == 'false')
	{
		$nonEditCell.each(function()
		{
			if($nonEditCell.attr('class') === 'titleRed'){$nonEditCell.css('color', 'red');}
			if($nonEditCell.attr('class') === 'titleAmber'){$nonEditCell.css('color', 'orange');}
			if($nonEditCell.attr('class') === 'titleBlue'){$nonEditCell.css('color', '#00557f');}
		});
		
		$button.attr('class', 'btnV');
		$button.attr('data','true');
	}
	else if($button.attr('data') == 'true')
	{
		$nonEditCell.css('color', 'green');
		$button.attr('class', 'btnVx');
		$button.attr('data','false');
	}
 }

function tableVerifyAll(tableIn)
{
	 var tableIn = $(tableIn);
	 $('.titleRed').each(function(){$(this).css('color', 'green')});
	 $('.titleAmber').each(function(){$(this).css('color', 'green')});
	 $('.titleBlue').each(function(){$(this).css('color', 'green')});
	 $('.btnV').each(function(){$(this).removeClass('btnV').addClass('btnVx'); $(this).attr('data','false');});
   }
   
function tableVerifyNone(tableIn)
{
	 var tableIn = $(tableIn);
	 $('.titleRed').each(function(){$(this).css('color', 'red')});
	 $('.titleAmber').each(function(){$(this).css('color', 'orange')});
	 $('.titleBlue').each(function(){$(this).css('color', '#00557f')});
	 $('.btnVx').each(function(){$(this).removeClass('btnVx').addClass('btnV'); $(this).attr('data','true');});

   }
  

  
function setBodyPos(divIn)
{
	
	var fixedTop = $('#fixedHead').offset().top;
	var bodyTop = $('#body').offset().top;
	var divInTop =$(divIn).offset().top;
	bodyOffset = divInTop -(fixedTop + bodyOffsetTop);
	var x = '-='+bodyOffset+'px'
	$('#body').animate({'margin-top': x });
}

function setTableHover()
{
	$('#tableBody tbody tr:even').addClass('alt');
		$('#tableBody tbody tr').hover(function()
		{ 
			$(this).addClass('altHover'); 
		}, function()
		{  
			$(this).removeClass('altHover');  
		});
  }
  
//Needed to fix ie10 bug not rendering svg fully(ie chart)
function renderBugFix()
{
	$(window).resize();
	
  }